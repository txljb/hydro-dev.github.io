(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{522:function(o,t,r){"use strict";r.r(t);var e=r(1),a=Object(e.a)({},(function(){var o=this,t=o.$createElement,r=o._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[r("h1",{attrs:{id:"数据库备份和恢复"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#数据库备份和恢复"}},[o._v("#")]),o._v(" 数据库备份和恢复")]),o._v(" "),r("h2",{attrs:{id:"备份"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#备份"}},[o._v("#")]),o._v(" 备份")]),o._v(" "),r("p",[o._v("为了保证数据安全，请定期备份。")]),o._v(" "),r("p",[o._v("若您使用自动脚本安装，可使用 "),r("code",[o._v("hydrooj backup")]),o._v(" 快捷备份数据。")]),o._v(" "),r("p",[o._v("可使用 MongoDB 自带的 "),r("a",{attrs:{href:"https://docs.mongodb.com/database-tools/mongodump/",target:"_blank",rel:"noopener noreferrer"}},[o._v("mongodump"),r("OutboundLink")],1),o._v(" 进行数据库备份。并将 "),r("code",[o._v("/data/file")]),o._v(" 文件夹备份即可。")]),o._v(" "),r("p",[o._v("对于数据库，请"),r("strong",[o._v("请不要在数据库运行时直接拷贝数据库文件夹")]),o._v("。请每次备份后检查生成的备份文件的大小和内容，确保备份成功。"),r("br"),o._v("\n请不要把备份数据和 Hydro 系统放在同一台机器上，这样数据丢失的风险仍然较高。")]),o._v(" "),r("h2",{attrs:{id:"恢复备份"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#恢复备份"}},[o._v("#")]),o._v(" 恢复备份")]),o._v(" "),r("p",[o._v("若您使用自动脚本安装，可使用 "),r("code",[o._v("hydrooj restore <备份文件路径>")]),o._v(" 恢复之前备份的数据。")]),o._v(" "),r("p",[o._v("使用 MongoDB 自带的 "),r("a",{attrs:{href:"https://docs.mongodb.com/database-tools/mongorestore/",target:"_blank",rel:"noopener noreferrer"}},[o._v("mongorestore"),r("OutboundLink")],1),o._v(" 导入备份的数据库文件，并还原 "),r("code",[o._v("/data/file")]),o._v(" 目录文件。"),r("br"),o._v("\n如果只是想不同机器之间迁移部署，只需要在"),r("strong",[o._v("停止 Hydro 和 MongoDB MinIO 服务后")]),o._v("将相关文件夹（通常为 "),r("code",[o._v("/data/db")]),o._v(" 与 "),r("code",[o._v("/data/file")]),o._v(" 与 "),r("code",[o._v("/root/.hydro/config.json")]),o._v(" ）复制即可。")])])}),[],!1,null,null,null);t.default=a.exports}}]);